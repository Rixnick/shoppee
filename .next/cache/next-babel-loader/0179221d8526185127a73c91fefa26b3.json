{"ast":null,"code":"var _jsxFileName = \"/home/loki/Desktop/Projects/Shoppin/shop-client/components/UserProduct/index.jsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component, useState } from 'react';\nimport ProductList from './ProductList';\nimport Backdrop from '../Backdrop';\nimport Modal from '../Modal';\nimport CreateProduct from './CreateProduct';\nimport { useMutation } from '@apollo/react-hooks';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\nimport { QUERY_PRODUCTS, CREATE_PRODUCT, UPDATE_PRODUCT, MY_PRODUCTS } from '../../graphql/Products';\n\nclass UserProduct extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      creating: false\n    });\n\n    _defineProperty(this, \"CreateEventHandler\", () => {\n      this.setState({\n        creating: true\n      });\n    });\n\n    _defineProperty(this, \"modalConfirmHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"modalCancelHandler\", () => {\n      this.setState({\n        creating: false\n      });\n    });\n\n    _defineProperty(this, \"_renderCreateProduct\", () => () => {\n      const {\n        0: edit,\n        1: setEdit\n      } = useState(false);\n      const {\n        0: file,\n        1: setFile\n      } = useState(null);\n      const {\n        0: productData,\n        1: setProductData\n      } = useState({\n        name: '',\n        description: '',\n        price: '',\n        imageUrl: ''\n      });\n      const [createProduct, {\n        loading,\n        error\n      }] = useMutation(CREATE_PRODUCT, {\n        refetchQueries: [{\n          query: QUERY_PRODUCTS\n        }]\n      });\n\n      const handleChange = e => setProductData(_objectSpread(_objectSpread({}, productData), {}, {\n        [e.target.name]: e.target.value\n      }));\n\n      const selectFile = e => {\n        const files = e.target.files;\n        setFile(files[0]); //console.log(files)\n      }; //Upload File to Cloudinary\n\n\n      const uploadFile = async () => {\n        const data = new FormData();\n        data.append('file', file);\n        data.append('upload_preset', 'shoppin');\n        const res = await fetch('https://api.cloudinary.com/v1_1/swizce/image/upload', {\n          method: 'post',\n          body: data\n        });\n        const result = await res.json(); //console.log('image result',  result)\n\n        return result.secure_url;\n      };\n\n      const handleSubmit = async e => {\n        try {\n          e.preventDefault();\n          const url = await uploadFile(); // console.log('image Url:', url)\n\n          if (url) {\n            const result = await createProduct({\n              variables: _objectSpread(_objectSpread({}, productData), {}, {\n                price: +productData.price,\n                imageUrl: url\n              })\n            }); //console.log('Product Data:', result)\n\n            return result;\n          }\n\n          Router.push('/userProducts');\n        } catch (error) {\n          console.log(error);\n        }\n      };\n\n      return __jsx(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }\n      }, \"Function Component\");\n    });\n  }\n\n  render() {\n    const CreateForm = this._renderCreateProduct();\n\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \"product-content__header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }\n    }, __jsx(\"h2\", {\n      className: \"dash-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }\n    }, \"All Products List\"), __jsx(\"a\", {\n      onClick: this.CreateEventHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, __jsx(\"span\", {\n      className: \"ti-plus\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 25\n      }\n    }, \"Add Product\"))), this.state.creating && __jsx(Backdrop, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 42\n      }\n    }), this.state.creating && __jsx(Modal, {\n      title: \"Create Product\",\n      canCancel: true,\n      canConfirm: true,\n      onCancel: this.modalCancelHandler,\n      onConfirm: this.modalConfirmHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, __jsx(CreateForm, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 25\n      }\n    })), __jsx(ProductList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default UserProduct;","map":{"version":3,"sources":["/home/loki/Desktop/Projects/Shoppin/shop-client/components/UserProduct/index.jsx"],"names":["React","Component","useState","ProductList","Backdrop","Modal","CreateProduct","useMutation","fetch","Router","QUERY_PRODUCTS","CREATE_PRODUCT","UPDATE_PRODUCT","MY_PRODUCTS","UserProduct","creating","setState","edit","setEdit","file","setFile","productData","setProductData","name","description","price","imageUrl","createProduct","loading","error","refetchQueries","query","handleChange","e","target","value","selectFile","files","uploadFile","data","FormData","append","res","method","body","result","json","secure_url","handleSubmit","preventDefault","url","variables","push","console","log","render","CreateForm","_renderCreateProduct","CreateEventHandler","state","modalCancelHandler","modalConfirmHandler"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react'\nimport ProductList from './ProductList';\nimport Backdrop from '../Backdrop';\nimport Modal from '../Modal';\nimport CreateProduct from './CreateProduct';\n\n\nimport { useMutation } from '@apollo/react-hooks';\nimport fetch from 'isomorphic-unfetch';\nimport Router from 'next/router';\nimport { QUERY_PRODUCTS, CREATE_PRODUCT, UPDATE_PRODUCT, MY_PRODUCTS } from '../../graphql/Products';\n\n\nclass UserProduct extends Component {\n    state = {\n        creating: false\n    };\n\n    CreateEventHandler = () => {\n        this.setState({ creating: true });\n    };\n\n    modalConfirmHandler = () => {\n        this.setState({ creating: false });\n    };\n\n    modalCancelHandler = () => {\n        this.setState({ creating: false });\n    };\n    /**\n     * Create Form Component with Function\n     */\n    _renderCreateProduct = () => () => {\n        const [edit, setEdit] = useState(false)\n    const [file, setFile] = useState(null)\n    const [productData, setProductData] = useState({\n        name: '',\n        description: '',\n        price: '',\n        imageUrl: ''\n    })\n\n    const [createProduct, { loading, error }] = useMutation(CREATE_PRODUCT, {\n        refetchQueries: [{ query: QUERY_PRODUCTS }]\n    })\n\n    const handleChange = e => setProductData({\n        ...productData,\n        [e.target.name]: e.target.value\n    })\n\n    const selectFile = e => {\n        const files = e.target.files\n        setFile(files[0])\n        //console.log(files)\n    }\n\n    //Upload File to Cloudinary\n    const uploadFile = async () => {\n        const data = new FormData()\n        data.append('file', file)\n        data.append('upload_preset', 'shoppin')\n        const res = await fetch('https://api.cloudinary.com/v1_1/swizce/image/upload', {\n            method: 'post',\n            body: data\n        })\n        const result = await res.json()\n        //console.log('image result',  result)\n        return result.secure_url\n    }\n\n    const handleSubmit = async e => {\n        try {\n            e.preventDefault()\n            const url = await uploadFile()\n            // console.log('image Url:', url)\n            if (url) {\n                const result = await createProduct({\n                    variables: {\n                        ...productData,\n                        price: +productData.price,\n                        imageUrl: url\n                    },\n                })\n                //console.log('Product Data:', result)\n                return result;\n            }\n            Router.push('/userProducts')\n        } catch (error) {\n            console.log(error)\n        }\n    }\n        return(\n            <h1>Function Component</h1>\n        )\n    }\n\n    render() {\n        const CreateForm = this._renderCreateProduct();\n        return (\n            <>\n                <div className=\"product-content__header\">\n                    <h2 className=\"dash-title\">All Products List</h2>\n                    <a onClick={this.CreateEventHandler}>\n                        <span className=\"ti-plus\"></span>\n                        <small>Add Product</small>\n                    </a>\n                </div>\n                { this.state.creating && <Backdrop />}\n                { this.state.creating && (\n                    <Modal title=\"Create Product\" \n                        canCancel \n                        canConfirm \n                        onCancel={this.modalCancelHandler} \n                        onConfirm={this.modalConfirmHandler}>\n                        <CreateForm />\n                    </Modal>)}\n                <ProductList />\n            </>\n        )\n    }\n}\n\nexport default UserProduct;\n"]},"metadata":{},"sourceType":"module"}