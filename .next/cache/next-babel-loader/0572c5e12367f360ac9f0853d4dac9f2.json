{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/home/loki/Desktop/Projects/Shoppin/shop-client/components/ProductDetail/index.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { QUERY_PRODUCT, MY_PRODUCTS } from '../../graphql/Products';\nimport { AuthContext } from '../../contexts/AuthProvider';\nimport { ADD_TO_CART } from '../../graphql/Carts';\n\nvar ProductDetail = function ProductDetail() {\n  _s();\n\n  var route = useRouter();\n\n  var _useQuery = useQuery(QUERY_PRODUCT, {\n    variables: {\n      id: route.query.productId\n    }\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error; //console.log('ProductID:', route.query.productId)\n\n\n  var _useContext = useContext(AuthContext),\n      user = _useContext.user;\n\n  console.log(\"produc Id\", data);\n\n  var _useMutation = useMutation(ADD_TO_CART, {\n    onCompleted: function onCompleted(data) {\n      console.log('data', data);\n    },\n    refetchQueries: [{\n      query: MY_PRODUCTS\n    }]\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 1),\n      addToCart = _useMutation2[0];\n\n  var handleAddToCart = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(id) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (user) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\", Router.push('/signin'));\n\n            case 2:\n              _context.next = 4;\n              return addToCart({\n                variables: {\n                  id: id\n                }\n              });\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleAddToCart(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); //    console.log('result', data)\n\n\n  if (error) return __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 23\n    }\n  }, \"Ooops....! Something went wrong, Plz try again later\");\n  if (loading) return __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 25\n    }\n  }, \"loading...\");\n  return __jsx(\"div\", {\n    className: \"product-detail-card\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"product-image\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    src: data.product.imageUrl,\n    alt: data.product.description,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"product-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, __jsx(\"h3\", {\n    className: \"header-title\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 17\n    }\n  }, \"Product Detail\"), __jsx(\"div\", {\n    className: \"box-head\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }\n  }, __jsx(\"h2\", {\n    className: \"product-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 21\n    }\n  }, \"Speaker Beats EP\")), __jsx(\"div\", {\n    className: \"box-content\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    className: \"product-desc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 21\n    }\n  }, \"There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable. If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text. All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary, making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words, combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable. The generated Lorem Ipsum is therefore always free from repetition, injected humour, or non-characteristic words\")), __jsx(\"div\", {\n    className: \"product-size\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 21\n    }\n  }, \"product content here\")), __jsx(\"div\", {\n    className: \"product-color\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 21\n    }\n  }, \"product color conyent here\")), __jsx(\"div\", {\n    className: \"product-rating\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"Rate my product here\")), __jsx(\"div\", {\n    className: \"transport-service\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, \"Shipping via\")), __jsx(\"hr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"box-footer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, \"ADD CART\"))));\n};\n\n_s(ProductDetail, \"YGQPhgnm7meH7oJEX4GJUsMJdyU=\", false, function () {\n  return [useRouter, useQuery, useMutation];\n});\n\n_c = ProductDetail;\nexport default ProductDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetail\");","map":{"version":3,"sources":["/home/loki/Desktop/Projects/Shoppin/shop-client/components/ProductDetail/index.jsx"],"names":["React","useContext","Router","useRouter","useQuery","useMutation","QUERY_PRODUCT","MY_PRODUCTS","AuthContext","ADD_TO_CART","ProductDetail","route","variables","id","query","productId","data","loading","error","user","console","log","onCompleted","refetchQueries","addToCart","handleAddToCart","push","product","imageUrl","description"],"mappings":"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","sourcesContent":["\nimport React,  { useContext } from 'react'\nimport Router, { useRouter } from 'next/router';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { QUERY_PRODUCT, MY_PRODUCTS } from '../../graphql/Products';\nimport { AuthContext } from '../../contexts/AuthProvider';\nimport { ADD_TO_CART } from '../../graphql/Carts';\n\n\nconst ProductDetail = () => {\n\n    const route = useRouter()\n    const { data, loading, error } = useQuery(QUERY_PRODUCT, { variables: { id: route.query.productId } })\n    //console.log('ProductID:', route.query.productId)\n    const { user } = useContext(AuthContext)\n    console.log(\"produc Id\", data)\n\n    const [addToCart] = useMutation(ADD_TO_CART, {\n        onCompleted: data => {\n            console.log('data', data)\n        },\n        refetchQueries: [{ query: MY_PRODUCTS }]\n    })\n\n    const handleAddToCart = async (id) => {\n        // console.log('product_id:',  id)\n\n        if (!user) {\n            return Router.push('/signin')\n        }\n        await addToCart({ variables: { id } })\n    }\n\n    //    console.log('result', data)\n    if (error) return <p>Ooops....! Something went wrong, Plz try again later</p>\n    if (loading) return <p>loading...</p>\n\n    return (\n        <div className=\"product-detail-card\">\n            <div className=\"product-image\">\n            <img src={data.product.imageUrl} alt={data.product.description} />\n            </div>\n\n            <div className=\"product-info\">\n                <h3 className=\"header-title\">Product Detail</h3>\n                <div className=\"box-head\">\n                    <h2 className=\"product-name\">Speaker Beats EP</h2>\n                </div>\n                <div className=\"box-content\">\n                    <p className=\"product-desc\">\n                        There are many variations of passages of Lorem Ipsum available,\n                        but the majority have suffered alteration in some form, by injected humour,\n                        or randomised words which don't look even slightly believable.\n                        If you are going to use a passage of Lorem Ipsum, you need to be sure there isn't anything embarrassing hidden in the middle of text.\n                        All the Lorem Ipsum generators on the Internet tend to repeat predefined chunks as necessary,\n                        making this the first true generator on the Internet. It uses a dictionary of over 200 Latin words,\n                        combined with a handful of model sentence structures, to generate Lorem Ipsum which looks reasonable.\n                        The generated Lorem Ipsum is therefore always free from repetition, injected humour,\n                        or non-characteristic words\n                    </p>\n                </div>\n                <div className=\"product-size\">\n                    <h3>product content here</h3>\n                </div>\n                <div className=\"product-color\">\n                    <h3>product color conyent here</h3>\n                </div>\n                <div className=\"product-rating\">\n                    <h3>Rate my product here</h3>\n                </div>\n                <div className=\"transport-service\">\n                    <h1>Shipping via</h1>\n                </div>\n                <hr />\n                <div className=\"box-footer\">\n                    <button type=\"submit\">ADD CART</button>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProductDetail;\n"]},"metadata":{},"sourceType":"module"}