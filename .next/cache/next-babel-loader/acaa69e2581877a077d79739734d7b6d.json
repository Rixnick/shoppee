{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport Router, { useRouter } from 'next/router';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nimport { QUERY_PRODUCT, MY_PRODUCTS } from '../../graphql/Products';\nimport { AuthContext } from '../../contexts/AuthProvider';\nimport { ADD_TO_CART } from '../../graphql/Carts';\n\nconst ProductDetail = () => {\n  const route = useRouter();\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(QUERY_PRODUCT, {\n    variables: {\n      id: route.query.productId\n    }\n  }); //console.log('ProductID:', route.query.productId)\n\n  const {\n    user\n  } = useContext(AuthContext); // console.log(\"produc Id\", data)\n\n  const [addToCart] = useMutation(ADD_TO_CART, {\n    onCompleted: data => {\n      console.log('data', data);\n    },\n    refetchQueries: [{\n      query: MY_PRODUCTS\n    }]\n  });\n\n  const handleAddToCart = async id => {\n    // console.log('product_id:',  id)\n    if (!user) {\n      return Router.push('/signin');\n    }\n\n    await addToCart({\n      variables: {\n        id\n      }\n    });\n  }; //    console.log('result', data)\n\n\n  if (error) return __jsx(\"p\", null, \"Ooops....! Something went wrong, Plz try again later\");\n  if (loading) return __jsx(\"p\", null, \"loading...\");\n  return __jsx(\"div\", {\n    className: \"product-detail-card\"\n  }, __jsx(\"div\", {\n    className: \"product-detail-cover\"\n  }, __jsx(\"div\", {\n    className: \"product-image\"\n  }, __jsx(\"img\", {\n    src: data.product.imageUrl,\n    alt: data.product.description\n  })), __jsx(\"div\", {\n    className: \"product-info\"\n  }, __jsx(\"h3\", {\n    className: \"header-title\"\n  }, \"Product Detail\"), __jsx(\"div\", {\n    className: \"box-head\"\n  }, __jsx(\"h2\", {\n    className: \"product-name\"\n  }, data.product.name)), __jsx(\"div\", {\n    className: \"box-content\"\n  }, __jsx(\"p\", {\n    className: \"product-desc\"\n  }, data.product.description)), __jsx(\"div\", {\n    className: \"product-size\"\n  }, __jsx(\"h3\", null, data.product.name)), __jsx(\"div\", {\n    className: \"product-color\"\n  }, __jsx(\"h3\", null, data.product.name)), __jsx(\"div\", {\n    className: \"product-rating\"\n  }, __jsx(\"h3\", null, data.product.name)), __jsx(\"div\", {\n    className: \"transport-service\"\n  }, __jsx(\"h5\", null, data.product.name)), __jsx(\"div\", {\n    className: \"product-price\"\n  }, __jsx(\"h1\", null, \" $\", data.product.price)))), __jsx(\"div\", {\n    className: \"product-detail-action\"\n  }, __jsx(\"hr\", null), __jsx(\"div\", {\n    className: \"box-footer\"\n  }, __jsx(\"button\", {\n    className: \"btn-back\",\n    onClick: () => Router.push('/products')\n  }, \"Back\"), __jsx(\"button\", {\n    className: \"btn-submit\",\n    onClick: () => handleAddToCart(data.product.id)\n  }, \"ADD CART\"))));\n};\n\nexport default ProductDetail;","map":null,"metadata":{},"sourceType":"module"}