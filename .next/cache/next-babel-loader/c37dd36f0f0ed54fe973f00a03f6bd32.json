{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/home/loki/Desktop/Projects/Shoppin/shop-client/components/Checkout/CheckoutWithCreditCard.jsx\";\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Script from 'react-load-script';\nvar OmiseCard;\nconsole.log(process.env.OMISE_PUBLIC_KEY);\n\nvar CheckoutWithCreditCard = function CheckoutWithCreditCard(_ref) {\n  var carts = _ref.carts;\n  var amount = carts.reduce(function (sum, cart) {\n    return sum + cart.qualtity * cart.product.price;\n  }, 0);\n\n  var handleLoadScript = function handleLoadScript() {\n    OmiseCard = window.OmiseCard;\n    OmiseCard.configure({\n      publicKey: process.env.OMISE_PUBLIC_KEY,\n      current: 'thb',\n      frameLabel: 'Ozone Shoppy',\n      submitLabel: 'Pay Now!',\n      buttonLabel: 'Pay With Omise'\n    });\n  };\n\n  var creditCardConfigure = function creditCardConfigure() {\n    OmiseCard.configure({\n      defaultPaymentMethod: 'credit_card',\n      otherPaymentMethod: []\n    });\n    OmiseCard.configureButton(\"#credit-card\");\n    OmiseCard.attach();\n  };\n\n  var omiseCardHandler = function omiseCardHandler() {\n    //const { cart, user, createCreditCardcharge } = props;\n    OmiseCard.open({\n      frameScription: 'Invoice #8723',\n      amount: amount * 100,\n      onCreateTokensuccess: function onCreateTokensuccess(token) {\n        console.log(token);\n        createCreditCardcharge(user.email, user.username, cart.amount, token);\n      },\n      onFormClosed: function onFormClosed() {}\n    });\n  };\n\n  var handleClick = function handleClick() {\n    creditCardConfigure();\n    omiseCardHandler();\n  };\n\n  return __jsx(\"div\", {\n    className: \"own-form\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, __jsx(Script, {\n    url: \"https://cdn.omise.co/omise.js\",\n    onLoad: handleLoadScript,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 12\n    }\n  }), __jsx(\"form\", {\n    action: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    id: \"credit-card\",\n    className: \"btn-payment\",\n    type: \"button\",\n    disabled: !amount,\n    onClick: handleClick,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Pay Now!\")));\n};\n\n_c = CheckoutWithCreditCard;\nexport default CheckoutWithCreditCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutWithCreditCard\");","map":{"version":3,"sources":["/home/loki/Desktop/Projects/Shoppin/shop-client/components/Checkout/CheckoutWithCreditCard.jsx"],"names":["React","Script","OmiseCard","console","log","process","env","OMISE_PUBLIC_KEY","CheckoutWithCreditCard","carts","amount","reduce","sum","cart","qualtity","product","price","handleLoadScript","window","configure","publicKey","current","frameLabel","submitLabel","buttonLabel","creditCardConfigure","defaultPaymentMethod","otherPaymentMethod","configureButton","attach","omiseCardHandler","open","frameScription","onCreateTokensuccess","token","createCreditCardcharge","user","email","username","onFormClosed","handleClick"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,IAAIC,SAAJ;AAEAC,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,gBAAxB;;AAGA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,OAAa;AAAA,MAAXC,KAAW,QAAXA,KAAW;AACpC,MAAMC,MAAM,GAAGD,KAAK,CAACE,MAAN,CAAa,UAACC,GAAD,EAAMC,IAAN;AAAA,WAAeD,GAAG,GAAGC,IAAI,CAACC,QAAL,GAAgBD,IAAI,CAACE,OAAL,CAAaC,KAAlD;AAAA,GAAb,EAAsE,CAAtE,CAAf;;AACA,MAAOC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC5Bf,IAAAA,SAAS,GAAGgB,MAAM,CAAChB,SAAnB;AACAA,IAAAA,SAAS,CAACiB,SAAV,CAAoB;AAChBC,MAAAA,SAAS,EAAEf,OAAO,CAACC,GAAR,CAAYC,gBADP;AAEhBc,MAAAA,OAAO,EAAE,KAFO;AAGhBC,MAAAA,UAAU,EAAE,cAHI;AAIhBC,MAAAA,WAAW,EAAE,UAJG;AAKhBC,MAAAA,WAAW,EAAE;AALG,KAApB;AAOH,GATD;;AAWA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;AAC9BvB,IAAAA,SAAS,CAACiB,SAAV,CAAoB;AAChBO,MAAAA,oBAAoB,EAAE,aADN;AAEhBC,MAAAA,kBAAkB,EAAE;AAFJ,KAApB;AAIAzB,IAAAA,SAAS,CAAC0B,eAAV,CAA0B,cAA1B;AACA1B,IAAAA,SAAS,CAAC2B,MAAV;AACP,GAPG;;AAUJ,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B;AACA5B,IAAAA,SAAS,CAAC6B,IAAV,CAAe;AACXC,MAAAA,cAAc,EAAE,eADL;AAEXtB,MAAAA,MAAM,EAAEA,MAAM,GAAG,GAFN;AAGXuB,MAAAA,oBAAoB,EAAE,8BAAAC,KAAK,EAAI;AAC3B/B,QAAAA,OAAO,CAACC,GAAR,CAAY8B,KAAZ;AACAC,QAAAA,sBAAsB,CAACC,IAAI,CAACC,KAAN,EAAaD,IAAI,CAACE,QAAlB,EAA4BzB,IAAI,CAACH,MAAjC,EAAyCwB,KAAzC,CAAtB;AACH,OANU;AAOXK,MAAAA,YAAY,EAAE,wBAAM,CAAE;AAPX,KAAf;AASH,GAXD;;AAcA,MAAMC,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBf,IAAAA,mBAAmB;AACnBK,IAAAA,gBAAgB;AACnB,GAHD;;AAIA,SACI;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,MAAC,MAAD;AAAQ,IAAA,GAAG,EAAC,+BAAZ;AAA4C,IAAA,MAAM,EAAEb,gBAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADH,EAEI;AAAM,IAAA,MAAM,EAAC,EAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AACI,IAAA,EAAE,EAAC,aADP;AAEI,IAAA,SAAS,EAAC,aAFd;AAGI,IAAA,IAAI,EAAC,QAHT;AAII,IAAA,QAAQ,EAAE,CAACP,MAJf;AAKI,IAAA,OAAO,EAAE8B,WALb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CAFJ,CADJ;AAgBH,CAzDD;;KAAMhC,sB;AA2DN,eAAeA,sBAAf","sourcesContent":["import React from 'react';\nimport Script from 'react-load-script'\n\nlet OmiseCard;\n\nconsole.log(process.env.OMISE_PUBLIC_KEY)\n\n\nconst CheckoutWithCreditCard = ({carts}) => {\n        const amount = carts.reduce((sum, cart) => sum + cart.qualtity * cart.product.price, 0)\n        const  handleLoadScript = () => {\n            OmiseCard = window.OmiseCard\n            OmiseCard.configure({\n                publicKey: process.env.OMISE_PUBLIC_KEY,\n                current: 'thb',\n                frameLabel: 'Ozone Shoppy',\n                submitLabel: 'Pay Now!',\n                buttonLabel: 'Pay With Omise'\n            })\n        }\n\n        const creditCardConfigure = () => {\n            OmiseCard.configure({\n                defaultPaymentMethod: 'credit_card',\n                otherPaymentMethod: []\n            })\n            OmiseCard.configureButton(\"#credit-card\")\n            OmiseCard.attach()\n    }\n\n\n    const omiseCardHandler = () => {\n        //const { cart, user, createCreditCardcharge } = props;\n        OmiseCard.open({\n            frameScription: 'Invoice #8723',\n            amount: amount * 100,\n            onCreateTokensuccess: token => {\n                console.log(token)\n                createCreditCardcharge(user.email, user.username, cart.amount, token)\n            },\n            onFormClosed: () => {}\n        })\n    }\n\n\n    const handleClick = () => {\n        creditCardConfigure()\n        omiseCardHandler()\n    }\n    return (\n        <div className=\"own-form\">\n           <Script url='https://cdn.omise.co/omise.js' onLoad={handleLoadScript} />\n            <form action=\"\">\n                <button\n                    id=\"credit-card\"\n                    className=\"btn-payment\"\n                    type=\"button\"\n                    disabled={!amount}\n                    onClick={handleClick}\n                >\n                    Pay Now!\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default CheckoutWithCreditCard;\n"]},"metadata":{},"sourceType":"module"}