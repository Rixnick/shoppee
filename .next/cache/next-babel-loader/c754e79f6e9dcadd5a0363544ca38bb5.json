{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Script from 'react-load-script';\nvar OmiseCard;\n\nvar CheckoutWithCreditCard = function CheckoutWithCreditCard(_ref) {\n  var carts = _ref.carts;\n  var amount = carts.reduce(function (sum, cart) {\n    return sum + cart.qualtity * cart.product.price;\n  }, 0);\n  console.log(process.env.OMISE_PUBLIC_KEY);\n\n  var handleLoadScript = function handleLoadScript() {\n    OmiseCard = window.OmiseCard;\n    OmiseCard.configure({\n      publicKey: process.env.OMISE_PUBLIC_KEY,\n      current: 'thb',\n      frameLabel: 'Ozone Shoppy',\n      submitLabel: 'Pay Now!',\n      buttonLabel: 'Pay With Omise'\n    });\n  };\n\n  var creditCardConfigure = function creditCardConfigure() {\n    OmiseCard.configure({\n      defaultPaymentMethod: 'credit_card',\n      otherPaymentMethod: []\n    });\n    OmiseCard.configureButton(\"#credit-card\");\n    OmiseCard.attach();\n  };\n\n  var omiseCardHandler = function omiseCardHandler() {\n    //const { cart, user, createCreditCardcharge } = props;\n    OmiseCard.open({\n      frameScription: 'Invoice #8723',\n      amount: amount * 100,\n      onCreateTokensuccess: function onCreateTokensuccess(token) {\n        console.log(token); //createCreditCardcharge(user.email, user.username, cart.amount, token)\n      },\n      onFormClosed: function onFormClosed() {}\n    });\n  };\n\n  var handleClick = function handleClick() {\n    creditCardConfigure();\n    omiseCardHandler();\n  };\n\n  return __jsx(\"div\", {\n    className: \"own-form\"\n  }, __jsx(Script, {\n    url: \"https://cdn.omise.co/omise.js\",\n    onLoad: handleLoadScript\n  }), __jsx(\"form\", {\n    action: \"\"\n  }, __jsx(\"button\", {\n    id: \"credit-card\",\n    className: \"btn-payment__omise\",\n    type: \"button\",\n    disabled: !amount,\n    onClick: handleClick\n  }, \"Pay Now! With Omise\")));\n};\n\nexport default CheckoutWithCreditCard;","map":null,"metadata":{},"sourceType":"module"}