{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { createContext, useState, useEffect } from 'react';\nimport Cookies from 'js-cookie';\nimport Router from 'next/router';\nexport const AuthContext = /*#__PURE__*/createContext();\n\nconst AuthProvider = ({\n  children,\n  userData\n}) => {\n  const {\n    0: user,\n    1: setUser\n  } = useState(userData); //Use Effect For Logout Automatic every tabs every windows\n\n  useEffect(() => {\n    const synLogout = e => {\n      if (e.key === 'logout') {\n        setUser(null);\n        Router.push('/products');\n      }\n    };\n\n    window.addEventListener('storage', synLogout);\n    return () => {\n      window.removeEventListener('storage', synLogout);\n      window.localStorage.removeItem('logout');\n    };\n  }, []);\n\n  const setAuthUser = userInfo => setUser(userInfo); //Create Logout on Context provider\n\n\n  const signout = () => {\n    Cookies.remove('jwtToken');\n    setUser(null);\n    localStorage.setItem('logout', Date.now());\n    Router.push('/products');\n  };\n\n  return __jsx(AuthContext.Provider, {\n    value: {\n      user,\n      setAuthUser,\n      signout\n    }\n  }, children);\n};\n\nexport default AuthProvider;","map":null,"metadata":{},"sourceType":"module"}