{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[5],{\"HaE+\":function(n,e,t){\"use strict\";function r(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(s){return void t(s)}c.done?e(u):Promise.resolve(u).then(r,o)}function o(n){return function(){var e=this,t=arguments;return new Promise((function(o,i){var a=n.apply(e,t);function c(n){r(a,o,i,c,u,\"next\",n)}function u(n){r(a,o,i,c,u,\"throw\",n)}c(void 0)}))}}t.d(e,\"a\",(function(){return o}))},JFjd:function(n,e,t){\"use strict\";t.d(e,\"b\",(function(){return d})),t.d(e,\"d\",(function(){return f})),t.d(e,\"c\",(function(){return p})),t.d(e,\"a\",(function(){return m})),t.d(e,\"e\",(function(){return v}));var r=t(\"h4VS\"),o=t(\"lTCR\"),i=t.n(o);function a(){var n=Object(r.a)([\"\\n      mutation UPDATE_PRODUCT(\\n            $id: ID!\\n            $name: String\\n            $description: String\\n            $price: Float\\n            $imageUrl: String\\n      ) {\\n            updateProduct(\\n                  id: $id\\n                  name: $name\\n                  description: $description\\n                  price: $price\\n                  imageUrl: $imageUrl\\n            ) {\\n                  id\\n                  name\\n                  description\\n                  price\\n                  imageUrl\\n            }\\n      }\\n\"]);return a=function(){return n},n}function c(){var n=Object(r.a)([\"\\n      mutation CREATE_PRODUCT(\\n            $name: String!\\n            $description: String!\\n            $price: Float!\\n            $imageUrl: String!\\n      ) {\\n            createProduct(\\n                  name: $name\\n                  description: $description\\n                  price: $price\\n                  imageUrl: $imageUrl\\n            ) {\\n                  name\\n                  description\\n                  price\\n                  imageUrl\\n            }\\n      }\\n\"]);return c=function(){return n},n}function u(){var n=Object(r.a)([\"\\n      query QUERY_PRODUCT($id: ID!) {\\n            product(id: $id) {\\n                  id\\n                  name\\n                  description\\n                  imageUrl\\n                  price\\n                  createdAt\\n            }\\n      }\\n\"]);return u=function(){return n},n}function s(){var n=Object(r.a)([\"\\n      query {\\n            products {\\n                  id\\n                  name\\n                  description\\n                  price\\n                  imageUrl\\n                  createdAt\\n                  user {\\n                        id\\n                  }\\n            }\\n      }\\n\"]);return s=function(){return n},n}function l(){var n=Object(r.a)([\"\\n      query MY_PRODUCTS {\\n            user {\\n                  id\\n                  username\\n                  email\\n                  products {\\n                        id\\n                        name\\n                        description\\n                        price\\n                        imageUrl\\n                  }\\n            }\\n      }\\n\"]);return l=function(){return n},n}var d=i()(l()),f=i()(s()),p=i()(u()),m=i()(c()),v=i()(a())},ODXe:function(n,e,t){\"use strict\";function r(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function o(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){if(\"undefined\"!==typeof Symbol&&Symbol.iterator in Object(n)){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(u){o=!0,i=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}}(n,e)||function(n,e){if(n){if(\"string\"===typeof n)return r(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return\"Object\"===t&&n.constructor&&(t=n.constructor.name),\"Map\"===t||\"Set\"===t?Array.from(n):\"Arguments\"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?r(n,e):void 0}}(n,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}()}t.d(e,\"a\",(function(){return o}))},YFqc:function(n,e,t){n.exports=t(\"cTJO\")},cTJO:function(n,e,t){\"use strict\";var r=t(\"J4zp\"),o=t(\"284h\");e.__esModule=!0,e.default=void 0;var i,a=o(t(\"q1tI\")),c=t(\"elyg\"),u=t(\"nOHt\"),s=new Map,l=window.IntersectionObserver,d={};var f=function(n,e){var t=i||(l?i=new l((function(n){n.forEach((function(n){if(s.has(n.target)){var e=s.get(n.target);(n.isIntersecting||n.intersectionRatio>0)&&(i.unobserve(n.target),s.delete(n.target),e())}}))}),{rootMargin:\"200px\"}):void 0);return t?(t.observe(n),s.set(n,e),function(){try{t.unobserve(n)}catch(e){console.error(e)}s.delete(n)}):function(){}};function p(n,e,t,r){(0,c.isLocalURL)(e)&&(n.prefetch(e,t,r).catch((function(n){0})),d[e+\"%\"+t]=!0)}var m=function(n){var e=!1!==n.prefetch,t=(0,u.useRouter)(),o=t&&t.pathname||\"/\",i=a.default.useMemo((function(){var e=(0,c.resolveHref)(o,n.href,!0),t=r(e,2),i=t[0],a=t[1];return{href:i,as:n.as?(0,c.resolveHref)(o,n.as):a||i}}),[o,n.href,n.as]),s=i.href,m=i.as,v=n.children,g=n.replace,y=n.shallow,h=n.scroll,b=n.locale;\"string\"===typeof v&&(v=a.default.createElement(\"a\",null,v));var w=a.Children.only(v),C=w&&\"object\"===typeof w&&w.ref,O=a.default.useRef(),U={ref:a.default.useCallback((function(n){(O.current&&(O.current(),O.current=void 0),e&&l&&n&&n.tagName&&(0,c.isLocalURL)(s))&&(d[s+\"%\"+m]||(O.current=f(n,(function(){p(t,s,m,{locale:\"undefined\"!==typeof b?b:t&&t.locale})}))));C&&(\"function\"===typeof C?C(n):\"object\"===typeof C&&(C.current=n))}),[e,C,s,m,t,b]),onClick:function(n){w.props&&\"function\"===typeof w.props.onClick&&w.props.onClick(n),n.defaultPrevented||function(n,e,t,r,o,i,a,u){(\"A\"!==n.currentTarget.nodeName||!function(n){var e=n.currentTarget.target;return e&&\"_self\"!==e||n.metaKey||n.ctrlKey||n.shiftKey||n.altKey||n.nativeEvent&&2===n.nativeEvent.which}(n)&&(0,c.isLocalURL)(t))&&(n.preventDefault(),null==a&&(a=r.indexOf(\"#\")<0),e[o?\"replace\":\"push\"](t,r,{shallow:i,locale:u}).then((function(n){n&&a&&(window.scrollTo(0,0),document.body.focus())})))}(n,t,s,m,g,y,h,b)}};return e&&(U.onMouseEnter=function(n){(0,c.isLocalURL)(s)&&(w.props&&\"function\"===typeof w.props.onMouseEnter&&w.props.onMouseEnter(n),p(t,s,m,{priority:!0}))}),(n.passHref||\"a\"===w.type&&!(\"href\"in w.props))&&(U.href=(0,c.addBasePath)((0,c.addLocale)(m,\"undefined\"!==typeof b?b:t&&t.locale,t&&t.defaultLocale))),a.default.cloneElement(w,U)};e.default=m},iAj1:function(n,e,t){\"use strict\";var r=t(\"q1tI\"),o=t.n(r),i=t(\"uc3D\"),a=t(\"JFjd\"),c=t(\"o0o1\"),u=t.n(c),s=t(\"HaE+\"),l=t(\"ODXe\"),d=t(\"nOHt\"),f=t.n(d),p=t(\"YFqc\"),m=t.n(p),v=t(\"nycs\"),g=t(\"kAMa\"),y=o.a.createElement;var h=function(n){var e=n.prod,t=Object(r.useContext)(v.a).user,o=Object(i.useMutation)(g.a,{onCompleted:function(n){console.log(\"data\",n)},refetchQueries:[{query:a.b}]}),c=Object(l.a)(o,2),d=c[0],p=c[1],h=p.loading,b=(p.error,function(){var n=Object(s.a)(u.a.mark((function n(e){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt(\"return\",f.a.push(\"/signin\"));case 2:return n.next=4,d({variables:{id:e}});case 4:case\"end\":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());return y(\"div\",{className:\"product_card\"},y(\"img\",{src:e.imageUrl,alt:e.description}),y(\"div\",{className:\"product_box\"},y(\"h3\",{title:e.name},e.name),y(\"span\",null,\"$\",e.price)),y(\"p\",null,e.description),y(\"div\",{className:\"row_btn\"},t&&t.id===e.user.id?y(\"button\",{className:\"btn-manage\",onClick:function(){return f.a.push(\"/manage\")}},\"Manage\"):y(\"div\",{className:\"btn-slot\"},y(\"button\",{className:\"btn-buy\",onClick:function(){return b(e.id)}},h?\"Processing....\":\"Buy!\"),y(\"button\",{className:\"btn-view\"},y(m.a,{href:\"/products/product_detail\",as:\"/products/\".concat(e.id)},\"View \")))))},b=o.a.createElement;e.a=function(){var n=Object(i.useQuery)(a.d),e=n.data,t=n.loading;return n.error?b(\"p\",null,\"Ooops....! Something went wrong, Plz try again later\"):t?b(\"p\",null,\"loading...\"):b(o.a.Fragment,null,b(\"div\",{className:\"products\"},e.products.map((function(n){return b(h,{key:n.id,prod:n})}))))}},kAMa:function(n,e,t){\"use strict\";t.d(e,\"a\",(function(){return s})),t.d(e,\"c\",(function(){return l})),t.d(e,\"b\",(function(){return d}));var r=t(\"h4VS\"),o=t(\"lTCR\"),i=t.n(o);function a(){var n=Object(r.a)([\"\\n    mutation DELETE_CART($id: ID!){\\n        deleteCart(id: $id){\\n            id\\n        }\\n    }\\n\"]);return a=function(){return n},n}function c(){var n=Object(r.a)([\"\\n    query MY_CARTS {\\n        user {\\n                id\\n                username\\n                email\\n                carts{\\n                    id\\n                    product{\\n                            name\\n                            description\\n                            imageUrl\\n                            price\\n                        }\\n                        qualtity\\n                }\\n            }\\n    }\\n\"]);return c=function(){return n},n}function u(){var n=Object(r.a)([\"\\n      mutation ADD_TO_CART($id: ID!) {\\n            addToCart(id: $id) {\\n                  id\\n                  product {\\n                        id\\n                        name\\n                        description\\n                        imageUrl\\n                        price\\n                  }\\n                  qualtity\\n            }\\n      }\\n\"]);return u=function(){return n},n}var s=i()(u()),l=i()(c()),d=i()(a())},nycs:function(n,e,t){\"use strict\";t.d(e,\"a\",(function(){return l}));var r=t(\"q1tI\"),o=t.n(r),i=t(\"p46w\"),a=t.n(i),c=t(\"nOHt\"),u=t.n(c),s=o.a.createElement,l=Object(r.createContext)();e.b=function(n){var e=n.children,t=n.userData,o=Object(r.useState)(t),i=o[0],c=o[1];Object(r.useEffect)((function(){var n=function(n){\"logout\"===n.key&&(c(null),u.a.push(\"/products\"))};return window.addEventListener(\"storage\",n),function(){window.removeEventListener(\"storage\",n),window.localStorage.removeItem(\"logout\")}}),[]);return s(l.Provider,{value:{user:i,setAuthUser:function(n){return c(n)},signout:function(){a.a.remove(\"jwtToken\"),c(null),localStorage.setItem(\"logout\",Date.now()),u.a.push(\"/products\")}}},e)}},p46w:function(n,e,t){var r,o;!function(i){if(void 0===(o=\"function\"===typeof(r=i)?r.call(e,t,e,n):r)||(n.exports=o),!0,n.exports=i(),!!0){var a=window.Cookies,c=window.Cookies=i();c.noConflict=function(){return window.Cookies=a,c}}}((function(){function n(){for(var n=0,e={};n<arguments.length;n++){var t=arguments[n];for(var r in t)e[r]=t[r]}return e}function e(n){return n.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function t(r){function o(){}function i(e,t,i){if(\"undefined\"!==typeof document){\"number\"===typeof(i=n({path:\"/\"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():\"\";try{var a=JSON.stringify(t);/^[\\{\\[]/.test(a)&&(t=a)}catch(s){}t=r.write?r.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\\(\\)]/g,escape);var c=\"\";for(var u in i)i[u]&&(c+=\"; \"+u,!0!==i[u]&&(c+=\"=\"+i[u].split(\";\")[0]));return document.cookie=e+\"=\"+t+c}}function a(n,t){if(\"undefined\"!==typeof document){for(var o={},i=document.cookie?document.cookie.split(\"; \"):[],a=0;a<i.length;a++){var c=i[a].split(\"=\"),u=c.slice(1).join(\"=\");t||'\"'!==u.charAt(0)||(u=u.slice(1,-1));try{var s=e(c[0]);if(u=(r.read||r)(u,s)||e(u),t)try{u=JSON.parse(u)}catch(l){}if(o[s]=u,n===s)break}catch(l){}}return n?o[n]:o}}return o.set=i,o.get=function(n){return a(n,!1)},o.getJSON=function(n){return a(n,!0)},o.remove=function(e,t){i(e,\"\",n(t,{expires:-1}))},o.defaults={},o.withConverter=t,o}((function(){}))}))}}]);","extractedComments":[]}